{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Assign Helper</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .excel-table {
          border-collapse: collapse;
          width: 100%;
        }
      
        .excel-table th,
        .excel-table td {
          padding: 8px; /* Adjust padding as needed */
          border: 1px solid #dddddd;
          text-align: left;
        }
      
        .excel-table th {
          background-color: #f2f2f2;
        }
      </style>
</head>
  <body>
    {% block content %}
    
    {% endblock  %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  </body>
  
</html>

<script>
  // function for ajax call to save_selected_value with posting selectElement, customer_id values in post data
  function get_val(selectElement, customer_id){
    var customer = customer_id;
    var helper = selectElement.value;
    

    var selectElements = document.getElementsByClassName('helper_assignee_');
    for (var i = 0; i < selectElements.length; i++) {
        var options = selectElements[i].options;
        for (var j = 0; j < options.length; j++) {
            if (options[j].value === helper && selectElements[i] !== customer) {
                // Disable or remove the selected option
                options[j].disabled = true; // Or options[j].remove();
            }
        }
    }
    // Prepare data to be sent
    var data = {
        customer_id: customer,
        selected_value: helper
    };

    // Send data to the server
    fetch('/save_selected_value/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        // Handle successful response
        console.log('Data sent successfully:', data);
        toster.sucess('successful');
        // You can do something else here if needed
    })
    .catch(error => {
        // Handle error
        console.error('There was a problem with your fetch operation:', error);
    });
}

</script>